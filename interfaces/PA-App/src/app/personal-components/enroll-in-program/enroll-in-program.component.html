<section>
  <dialogue-turn [actor]="programDetails?.ngo"
                 *ngIf="programDetails?.title"
                 [isSpoken]="programDetails?.title"
  >
    <p>
      <play-text-audio key="personal.enroll-in-program.introduction" class="ion-float-start ion-margin-end"></play-text-audio>
      <span [innerHTML]="'personal.enroll-in-program.introduction'|translate:{ programTitle:'<strong>'+programDetails?.title+'</strong>', ngo:'<strong>'+programDetails?.ngo+'</strong>' }"></span>
    </p>

    <p>
      <play-text-audio key="personal.enroll-in-program.introduction-questions" class="ion-float-start ion-margin-end"></play-text-audio>
      {{ 'personal.enroll-in-program.introduction-questions'|translate }}
    </p>

    <more-info-button buttonKey="personal.enroll-in-program.more-info-questions"
                      messageKey="personal.enroll-in-program.info-message"
                      headingKey="personal.enroll-in-program.more-info-questions"
    ></more-info-button>
  </dialogue-turn>

  <q-and-a-set [questions]="questions"
               [answers]="answers"
               [(isSubmitted)]="hasAnswered"
               [(isEditing)]="hasChangedAnswers"
               [allQuestionsShown]="allQuestionsShown"
               (submit)="submit($event)"
               submitLabel="personal.enroll-in-program.submit"
  ></q-and-a-set>

  <dialogue-turn [actor]="programDetails?.ngo"
                 *ngIf="hasAnswered"
                 [isSpoken]="hasAnswered"
  >
    <p>
      <play-text-audio key="personal.enroll-in-program.please-confirm" class="ion-float-start ion-margin-end"></play-text-audio>
      {{ 'personal.enroll-in-program.please-confirm'|translate }}
    </p>

    <more-info-button buttonKey="personal.enroll-in-program.more-info-share"
                      messageKey="personal.enroll-in-program.info-message-share"
                      headingKey="personal.enroll-in-program.more-info-share"
    ></more-info-button>
  </dialogue-turn>
  <dialogue-turn actor="self"
                 *ngIf="hasAnswered"
                 [isSpoken]="hasAnswered"
  >
    <ul>
      <li *ngFor="let question of questions">
        {{ question.label }}<br>
        <strong>{{ answers[question.code]?.label }}</strong>
      </li>
    </ul>

    <div class="ion-margin-top">
      <ion-row class="ion-nowrap ion-align-items-center">
        <play-text-audio key="personal.enroll-in-program.submit-confirm"
                         size="default"
        ></play-text-audio>
        <ion-button type="submit"
                    (click)="submitConfirm()"
                    [disabled]="isDisabled"
                    expand="block"
                    style="flex-basis:100%;"
        >
          {{ 'personal.enroll-in-program.submit-confirm'|translate }}
        </ion-button>
      </ion-row>
      <ion-row class="ion-nowrap ion-align-items-center">
        <play-text-audio key="personal.enroll-in-program.change"
                         size="default"
        ></play-text-audio>
        <ion-button type="button"
                    (click)="changeAnswers()"
                    [disabled]="isDisabled"
                    expand="block"
                    style="flex-basis:100%;"
                    fill="outline"
        >
          {{ 'personal.enroll-in-program.change'|translate }}
        </ion-button>
      </ion-row>
    </div>
  </dialogue-turn>
</section>

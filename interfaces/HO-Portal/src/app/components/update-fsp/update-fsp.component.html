<form
  method="POST"
  #updatePropertyForm="ngForm"
  (ngSubmit)="doUpdate()"
>
  <ion-item>
    <ion-label position="stacked">
      {{ label }}
    </ion-label>
    <ng-container>
      <ion-item class="ion-margin-top ion-align-self-stretch">
        <ion-select
          style="max-width: 100%;"
          ngDefaultControl
          name="propertyInput"
          [(ngModel)]="propertyModel"
          [value]="value"
          [placeholder]="placeholder"
          interface="popover"
          (ionChange)="onFspChange($event)"
        >
          <ion-select-option
            *ngFor="let fspItem of fspList"
            value="{{ fspItem.fsp }}">
              {{ fspItem.fsp }}
          </ion-select-option>
        </ion-select>
      </ion-item>
      <ng-container *ngIf="propertyModel != startingFspName">
        <ion-text class="ion-padding-vertical" *ngIf="attributeDifference.length > 0">
          {{ 'page.program.program-people-affected.edit-person-affected-popup.properties.fspChangeWarning' | translate }}:<br>
          <div>
            <span *ngFor="let attr of attributeDifference">{{ attr.name }} <span *ngIf="attr < attributeDifference.length -1">, </span></span>
          </div>
        </ion-text>
        <ion-item *ngFor="let attribute of selectedFspAttributes" position="stacked">
          <ion-label position="stacked">
            {{ attribute.name }}
          </ion-label>
          <ion-input
          ngDefaultControl
          [name]="attribute.name"
          [value]="attribute.value"
          [placeholder]="attribute.placeholder?.en"
          (ionChange)="onAttributeChange($event)"
          ></ion-input>
        </ion-item>
      </ng-container>
    </ng-container>
    <ion-note
      *ngIf="explanation"
      class="ion-margin-bottom"
    >
      {{ explanation }}
    </ion-note>
    <ion-row
      slot="end"
      class="ion-align-items-center ion-align-self-stretch"
    >
      <ion-button
        *ngIf="!inProgress && enableUpdateBtn"
        type="submit"
        size="small"
      >
        {{ 'common.update'|translate }}
      </ion-button>
      <ion-spinner
        *ngIf="inProgress"
        color="primary"
        size="small"
      ></ion-spinner>
    </ion-row>
  </ion-item>
</form>

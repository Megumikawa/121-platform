<h2 *ngIf="canMakeExport || canMakePayment">{{ 'page.program.program-payout.section-title'|translate }}</h2>

<div *ngIf="canMakeExport" class="ion-margin-vertical">
  <h3>{{ 'page.program.program-payout.make-export'|translate }}</h3>
  <ion-row class="ion-align-items-center">
    <select
      [(ngModel)]="exportInstallmentId"
      (change)="changeExportInstallment()"
      class="export-select ion-margin-end"
    >
      <option
        *ngFor="let installment of installments"
        [value]="installment.id"
        [disabled]="!installment.isExportAvailable"
        [attr.data-selected]="installment.statusOpen && installment.isExportAvailable"
      >
        {{ 'page.program.program-payout.installment-nr'|translate:{ number: installment.id } }}
        -
        <ng-container *ngIf="installment.statusOpen">
          {{ 'page.program.program-payout.open'|translate }}
        </ng-container>
        <ng-container *ngIf="!installment.statusOpen">
          {{ 'page.program.program-payout.closed'|translate }}
        </ng-container>
        -
        {{ installment.installmentDate|date:"yyyy-MM-dd" }}
      </option>
    </select>
    <app-export-list
      [programId]="programId"
      [exportType]="enumExportType.payment"
      [paymentInstallment]="exportInstallmentId"
      [paymentExportAvailable]="exportInstallmentAvailable"
    ></app-export-list>
  </ion-row>
</div>

<div *ngIf="canMakePayment" class="ion-margin-vertical">
  <h3>{{ 'page.program.program-payout.make-payment.make-payment'|translate }}</h3>
  <app-make-payment
    [programId]="programId"
    [program]="program"
  ></app-make-payment>
</div>
